!function(){function t(t,e){e.interceptors.push("apiService"),t.otherwise({redirectTo:"/login"})}t.$inject=["$routeProvider","$httpProvider"],angular.module("intranet",["ngRoute","ngCookies","ngMessages","home","login","dashboard","mail-mgmt","shared-services","api-interceptors"]).config(t).constant("API_URLS",{base_url:"/api/v2/"})}(),function(){function t(t){t.when("/birthdays",{controller:"Birthday",templateUrl:"src/app/modules/birthday/birthday.html"})}t.$inject=["$routeProvider"],angular.module("birthday",[]).config(t)}(),function(){function t(t){t.when("/blogs",{controller:"Blog",templateUrl:"public/app/modules/blog/blog-list.html"}).when("/blogs/:id",{controller:"Blog",templateUrl:"public/app/modules/blog/blog-detail.html"})}t.$inject=["$routeProvider"],angular.module("blog",[]).config(t)}(),function(){"use strict";function t(t){t.when("/content/:id",{controller:"Content",templateUrl:"public/app/modules/content/content.html"})}t.$inject=["$routeProvider"],angular.module("content",[]).config(t)}(),function(){"use strict";function t(t){t.when("/dashboard/apps",{templateUrl:"public/app/modules/dashboard/tpl/dashboard.tpl.html",controller:"Dashboard as vm",access:{restricted:!0},role:{admin:!1}}).otherwise({redirectTo:"/dashboard/apps"})}t.$inject=["$routeProvider"],angular.module("dashboard",[]).config(t)}(),function(){function t(t){t.when("/directory",{controller:"Directory",controllerAs:"vm",templateUrl:"public/app/modules/directory/directory.html"})}t.$inject=["$routeProvider"],angular.module("directory",[]).config(t)}(),function(){"use strict";function t(){return function(t){return new Date(t)}}function e(){return function(t){var e=t/1048576;return e.toFixed(2)}}function n(t){return function(e){return t.trustAsHtml(e)}}function o(){return function(t){var e=/&(nbsp|amp|quot|lt|gt);/g,n={nbsp:" ",amp:"&",quot:'"',lt:"<",gt:">"};return t.replace(e,function(t,e){return n[e]})}}n.$inject=["$sce"],angular.module("intranet").filter("sanitize",n).filter("removeEntities",o).filter("timestamp",t).filter("toMB",e)}(),function(){function t(t){t.when("/forms",{controller:"Form",controllerAs:"vm",templateUrl:"public/app/modules/forms/form-list.html",access:{restricted:!1}})}t.$inject=["$routeProvider"],angular.module("form",[]).config(t)}(),function(){function t(t){t.when("/help-desk",{templateUrl:"public/app/modules/help-desk/help.html",controller:"HelpDesk",controllerAs:"vm",access:{restricted:!1}})}t.$inject=["$routeProvider"],angular.module("help",[]).config(t)}(),function(){function t(t){t.when("/",{controller:"Home",controllerAs:"vm",templateUrl:"public/app/modules/home/home.html",access:{restricted:!1}}).when("/news-feed",{controller:"Home",controllerAs:"vm",templateUrl:"public/app/modules/home/news-feed.html",access:{restricted:!1}})}t.$inject=["$routeProvider"],angular.module("home",[]).config(t)}(),function(){function t(t){t.when("/login",{controller:"Login",controllerAs:"vm",templateUrl:"public/app/modules/login/login.html",access:{restricted:!1}})}t.$inject=["$routeProvider"],angular.module("login",[]).config(t)}(),function(){function t(t){t.when("/dashboard/mails",{templateUrl:"public/app/modules/mail/mail.html",controller:"Mail",access:{restricted:!0}})}t.$inject=["$routeProvider"],angular.module("mail",["ngFileUpload","ngMessages"]).config(t)}(),function(){"use strict";function t(t){t.when("/dashboard/apps/mails",{templateUrl:"public/app/modules/mail-mgmt/mail-mgmt.html",controller:"MailManager as vm",access:{restricted:!0}}).when("/dashboard/apps/mails/incoming",{templateUrl:"public/app/modules/mail-mgmt/incoming-mails.html",controller:"MailManager as vm",access:{restricted:!0}}).when("/dashboard/apps/mails/create",{templateUrl:"public/app/modules/mail-mgmt/mail-create.html",controller:"MailManager as vm",access:{restricted:!0}}).otherwise({redirectTo:"/dashboard/apps/mails"})}t.$inject=["$routeProvider"],angular.module("mail-mgmt",[]).config(t)}(),function(){function t(t){t.when("/notices/:slug",{controller:"Notice",controllerAs:"vm",templateUrl:"public/app/modules/notice/notice.html"}).when("/notices",{controller:"Notice",controllerAs:"vm",templateUrl:"public/app/modules/notice/notice-list.html"})}t.$inject=["$routeProvider"],angular.module("notice",[]).config(t)}(),function(){function t(t){t.when("/policies",{controller:"Policy",controllerAs:"vm",templateUrl:"public/app/modules/policy/policy-list.html",access:{restricted:!1}})}t.$inject=["$routeProvider"],angular.module("policy",[]).config(t)}(),function(){angular.module("poll",["ngCookies"])}(),function(){function t(t){t.when("/events",{controller:"Promotion",controllerAs:"vm",templateUrl:"public/app/modules/promotion/promotion.html"})}t.$inject=["$routeProvider"],angular.module("promotion",[]).config(t)}(),function(){function t(t){t.when("/staff-focus",{controller:"Staff",templateUrl:"public/app/modules/staff/staff.html",access:{restricted:!1}})}t.$inject=["$routeProvider"],angular.module("staff",[]).config(t)}(),function(){function t(t){t.when("/vacancies",{controller:"Vacancy",controllerAs:"vm",templateUrl:"public/app/modules/vacancy/vacancy-list.html",access:{restricted:!1}}).when("/vacancies/:slug",{controller:"Vacancy",controllerAs:"vm",templateUrl:"public/app/modules/vacancy/vacancy.html",access:{restricted:!1}})}t.$inject=["$routeProvider"],angular.module("vacancy",[]).config(t)}(),function(){function t(t,e){t.date=Date.now(),e.get("/api/employees/birthday").then(function(e){t.birthdays=e.data})}t.$inject=["$scope","$http"],angular.module("birthday").controller("Birthday",t),t.$inejct=["$scope","$http"]}(),function(){function t(t,e,n,o){t.notices=n.getNotices(),o.getBlogById(e.id).then(function(e){t.blog=e})}angular.module("blog").controller("Blog",t),t.$inject=["$scope","$routeParams","sharedServices","blogService"]}(),function(){function t(t,e){t.notices=e.getNotices()}angular.module("content").controller("Content",t),t.$inject=["$scope","sharedServices"]}(),function(){"use strict";function t(t){function e(){console.log("activate dashboard")}function n(e){t.path("/"+e)}var o=this;o.goTo=n,e()}angular.module("dashboard").controller("Dashboard",t),t.$inject=["$location"]}(),function(){"use strict";function t(t,e,n){function o(){r(5)}function r(t){n.getEmployeesByDepartment(t).then(function(t){i.employees=t})["catch"](function(t){i.employees=[]})}function c(){i.query&&i.query.length>2?n.search(i.query).then(function(t){i.employees=t})["catch"](function(t){i.employees=r(5)}):i.employees=r(5)}var i=this;i.search=c,i.getEmployees=r,o(),n.getDepartments().then(function(t){i.departments=t})}angular.module("directory").controller("Directory",t),t.$inject=["$http","$routeParams","directoryService"]}(),function(){function t(t,e){function n(){e.getPostsByCategory("forms").then(function(t){o.forms=t})["catch"](function(t){o.forms=[]})}var o=this;n()}angular.module("form").controller("Form",t),t.$inject=["$routeParams","sharedServices"]}(),function(){function t(t,e,n){function o(){n.getTickets({fname:"Courtney",lname:"Laidlaw"}).then(function(t){s.tickets=t})["catch"](function(t){s.tickets=[]})}function r(t){t&&(s.issue.category=s.selected.id,s.issue={},s.message=!0,o())}function c(){s.message=!1}function i(t){switch(t){case"open-tickets":o(),s.open_tickets=!0,s.create_ticket=!1,s.closed_tickets=!1;break;case"create-ticket":a(),s.create_ticket=!0,s.open_tickets=!1,s.closed_tickets=!1;break;case"closed-tickets":s.open_tickets=!1,s.create_ticket=!1,s.closed_tickets=!0}}function a(){n.getCategories().then(function(t){s.selected=t[0],s.categories=t})["catch"](function(t){s.categories=[]})}function u(){n.getClosedTickets({fname:"Courtney",lname:"Laidlaw"}).then(function(t){s.tickets_closed=t})["catch"](function(t){s.tickets_closed=[]})}var s=this;s.open_tickets=!0,s.closed_tickets=!1,s.create_ticket=!1,s.message=!1,s.dismiss=c,s.toggle=i,s.handleForm=r,s.issue={},o(),u()}angular.module("help").controller("HelpDesk",t),t.$inject=["$scope","$http","helpDeskService"]}(),function(){"use strict";function t(t,e,n,o,r,c){function i(t){e.path("#/"+t)}function a(){c.goTo("blogs")}function u(){c.goTo("staff-focus")}function u(){r.getPostsByCategory("staff-focus").then(function(t){s.staff=t})["catch"](function(t){s.staff=[]})}var s=this;s.goTo=i,s.getBlogs=a,s.getStaffFocus=u}angular.module("home").controller("Home",t),t.$inject=["$http","$location","$window","$routeParams","homeService","sharedServices"]}(),function(){function t(t,e){function n(n){e.authUser(n).then(function(e){sessionStorage.setItem("_jwt",e.token),r.user.password="",t.path("/dashboard/apps")})["catch"](function(t){console.log("Error")})}function o(){}var r=this;r.handleForm=n,r.message=!1,r.user={username:"",password:""},o()}angular.module("login").controller("Login",t),t.$inject=["$location","loginService"]}(),function(){function t(t,e,n,o,r,c,i){}angular.module("mail").controller("Mail",t),t.$inject=["$routeParams","$location","$scope","mailService","loginService","API_URLS","Upload"]}(),function(){"use strict";function t(t,e){function n(){i(),a(),u()}function o(e){t.path(e)}function r(){s.mail.file_title="blank",e.create(s.mail)}function c(t){console.log(t)}function i(){e.getByCategory(1).then(function(t){s.incoming=t})["catch"](function(t){console.log("Error")})}function a(){e.getByCategory(2).then(function(t){s.outgoing=t})["catch"](function(t){console.log("Error")})}function u(){}var s=this;s.goTo=o,s.createMail=r,s.changedValue=c,s.corr_types=[{id:1,title:"letter"},{id:2,title:"email"},{id:3,title:"file"},{id:4,title:"memo"},{id:5,title:"cabinet decision"},{id:6,title:"cabinet note"},{id:7,title:"cabinet submission"},{id:8,title:"invitation"},{id:9,title:"travel"}],n()}angular.module("mail-mgmt").controller("MailManager",t),t.$inject=["$location","mailmgmtService"]}(),function(){function t(t,e){function n(){e.getPostsByCategory("staff-notice").then(function(t){r.notices=t.splice(0,5)})["catch"](function(t){r.notices=[]})}function o(t){e.goTo(t)}var r=this;r.goTo=o,n(),e.getPostBySlug(t.slug).then(function(t){r.notice=t})["catch"](function(t){r.notice={}})}angular.module("notice").controller("Notice",t),t.$inject=["$routeParams","sharedServices"]}(),function(){function t(t,e){function n(){e.getPostsByCategory("policies").then(function(t){o.policies=t})["catch"](function(t){o.policies=[]})}var o=this;n()}angular.module("policy").controller("Policy",t),t.$inject=["$routeParams","sharedServices"]}(),function(){function t(t,e){function n(){var n={poll_id:1,answer:a.response,session_id:e.get("PHPSESSID")};t.post("/intranet/api/v1/poll/responses",n).then(function(t){a.showPollMessage=!0,a.response="ok",i()})["catch"](function(t){console.log("Erorr")})}function o(){a.showPollMessage=!1,a.showResults=!0,a.showPoll=!1,i()}function r(){a.showResults=!1,a.showPoll=!0,i()}function c(){a.showPollMessage=!1}function i(){t.get("/intranet/api/v1/poll/responses").then(function(t){a.results=t.data})["catch"](function(t){a.results={}})}var a=this;a.response="ok",a.processPoll=n,a.showResults=!1,a.showPoll=!0,a.viewResults=o,a.viewPoll=r,a.showPollMessage=!1,a.dismiss=c,i()}angular.module("poll").controller("Poll",t),t.$inject=["$http","$cookies"]}(),function(){function t(t){function e(){t.getPostsByCategory("promos").then(function(t){n.promo=t})["catch"](function(t){n.promo=[]})}var n=this;e()}angular.module("promotion").controller("Promotion",t),t.$inject=["sharedServices"]}(),function(){"use strict";function t(t,e){t.notices=e.getNotices()}angular.module("staff").controller("Staff",t),t.$inject=["$scope","sharedServices"]}(),function(){function t(t,e){function n(t){e.goTo(t)}function o(){e.getPostsByCategory("vacancies").then(function(t){r.vacancies=t})["catch"](function(t){r.vacancies=[]})}var r=this;r.goTo=n,o(),e.getPostBySlug(t.slug).then(function(t){r.vacancy=t})}angular.module("vacancy").controller("Vacancy",t),t.$inject=["$routeParams","sharedServices"]}(),function(){function t(t){function e(e){function n(t){return t.data}function o(t){}var r="/api/v1/blogs/"+e;return t.get(r).then(n)["catch"](o)}var n={getBlogById:e};return n}angular.module("blog").factory("blogService",t),t.$inject=["$http"]}(),function(){function t(t){function e(e){function n(t){return t.data}function o(t){}var r="/api/v1/content";return t.get(r).then(n)["catch"](o)}var n={getContentById:e};return n}angular.module("content").factory("contentService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function e(){function e(t){return t.data}function n(t){return t}var o="/intranet/api/v1/departments";return t.get(o).then(e)["catch"](n)}function n(e){function n(t){return t.data}function o(t){return t}var r="/intranet/api/v1/departments/"+e+"/employees";return t.get(r).then(n)["catch"](o)}function o(e){function n(t){return t.data}function o(t){return t}var r="/intranet/api/v1/employees/search?q="+e;return t.get(r).then(n)["catch"](o)}var r={getDepartments:e,getEmployeesByDepartment:n,search:o};return r}angular.module("directory").factory("directoryService",t),t.$inject=["$http"]}(),function(){function t(t){function e(e){function n(t){return t.data}function o(t){return t}return t.post("/api/v1/tickets",e).then(n)["catch"](o)}function n(e){function n(t){return t.data}function o(t){return t}return t.get("/api/v1/tickets/"+e.fname+"/"+e.lname).then(n)["catch"](o)}function o(e){function n(t){return t.data}function o(t){return t}return t.get("/api/v1/tickets/"+e.fname+"/"+e.lname+"/closed").then(n)["catch"](o)}function r(){function e(t){return t.data}function n(t){return t}return t.get("/api/v1/admin/tickets/types").then(e)["catch"](n)}var c={createTicket:e,getTickets:n,getClosedTickets:o,getCategories:r};return c}angular.module("help").factory("helpDeskService",t),t.$inject=["$http"]}(),function(){function t(t){function e(){function e(t){return t.data.posts}function n(t){return t}return t.get(c+"/get_category_posts?slug=vacancies").then(e)["catch"](n)}function n(e){function n(t){return t.data.post}function o(t){return t}return t.get(c+"/get_post/?slug="+e).then(n)["catch"](o)}function o(e){function n(t){return t.data.posts}function o(t){return t}return t.get(c+"/get_category_posts?slug="+e).then(n)["catch"](o)}function r(){function e(t){return t.data.items}function n(t){return t}return t.get("http://rss2json.com/api.json?rss_url=http://jamaica-gleaner.com/feed/rss.xml").then(e)["catch"](n)}var c="/wordpress/api",i={getVacancies:e,getVacancyBySlug:n,getPostsByCategory:o,getRSSFeed:r};return i}angular.module("home").factory("homeService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function e(){var e="http://rss2json.com/api.json?rss_url=",n="http://www.jamaicaobserver.com/rss/news/",o=e+encodeURI(n);t.get(o).then(function(t){console.log(t.data.items.slice(0,3)),$scope.news=t.data.items.slice(0,3)})}var n={getRss:e};return n}t.$inject=["$http"],angular.module("intranet").factory("rssService",t),t.inject=["$http"]}(),function(){function t(t,e){function n(n){function o(t){return t.data}function r(t){return t}return t.post(e.base_url+"auth/user",n).then(o)["catch"](r)}function o(t){console.log(t)}function r(t){return(""!==t.name||""!==t.password)&&(""!==t.name&&""!==t.password)}function c(n){function o(t){return t.data}function r(t){return t}return t.post(e.base_url+"departments",{dn:n}).then(o)["catch"](r)}function i(){return t.get(e.base_url+"auth/token").then(function(t){return t.data})["catch"](function(t){return t})}function a(t){localStorage.setItem("user",JSON.stringify(t))}function u(){return JSON.parse(localStorage.getItem("user"))}function s(){var t=JSON.parse(localStorage.getItem("user"));return t.id}function l(){var t=JSON.parse(localStorage.getItem("user"));return t.dept_id}function f(){sessionStorage.removeItem("_jwt")}function m(){var t=JSON.parse(localStorage.getItem("user"));return t.uname}function u(n,o){function r(t){return t.data}function c(t){return t}return t.post(e.base_url+"users",{dn:n,dept_id:o}).then(r)["catch"](c)}var g={authUser:n,checkCredentials:r,isAuthenticated:i,getDepartmentId:l,getDepartment:c,getUserId:s,getUser:u,getUserName:m,logout:f,setUser:a,routeUser:o};return g}angular.module("login").service("loginService",t),t.$inject=["$http","API_URLS"]}(),function(){function t(t,e,n,o){function r(t,n){var r=e.base_url+"upload/"+n;return o.upload({url:r,file:t}).then(function(t){return t})}function c(o){function r(t){return t}function c(t){return t}""!==o.file_title&&null!=o.file_title||(o.file_title="none"),"other"===o.mail_type&&(o.mail_type=o.other_type),"cabinet_sub"===o.mail_type&&(o.mail_type="cabinet sub"),o.created_by=n.getUserId(),o.dept_id=n.getDepartmentId();var i=e.base_url+"mails";return t.post(i,o).then(r)["catch"](c)}function i(){return{mail_type:"letter",sender:"",receipent:"",from_org:"",subject:"",receipt_date:new Date,file_title:""}}function a(n){function o(t){return t.data}function r(t){return t}var c=e.base_url+"mails/"+n;return t.get(c).then(o)["catch"](r)}function u(n){function o(t){return t.data}function r(t){return t}var c=e.base_url+"mails/departments/"+n;return t.get(c).then(o)["catch"](r)}function s(n){function o(t){return t.data}function r(t){return t}var c=e.base_url+"mails/"+n.mail_id+"/actions";return t.post(c,n).then(o)["catch"](r)}function l(n){function o(t){return t.data}function r(t){return t}var c=e.base_url+"mails/"+n+"/actions";return t.get(c).then(o)["catch"](r)}function f(n){function o(t){return t.data}function r(t){return t}var c=e.base_url+"mails/"+n+"/attachments";return t.get(c).then(o)["catch"](r)}function m(o){function r(t){return t.data}function c(t){return t}var i=e.base_url+"mails/"+o.id;return o.created_by=n.getUserId(),o.uname=n.getUserName(),t.put(i,o).then(r)["catch"](c)}var g={getMailsByDepartmentId:u,getMail:a,createMail:c,initMail:i,getActions:l,getAttachments:f,createAction:s,uploadFile:r,updateMail:m};return g}angular.module("mail").service("mailService",t),t.$inject=["$http","API_URLS","loginService","Upload"]}(),function(){"use strict";function t(t,e){function n(n){t.post(e.base_url+"mails",n).then(function(t){return t})["catch"](function(t){return t})}function o(n){return t.get(e.base_url+"mails/categories/"+n).then(function(t){return t.data})["catch"](function(t){return t})}var r={create:n,getByCategory:o};return r}angular.module("mail-mgmt").service("mailmgmtService",t),t.$inject=["$http","API_URLS"]}(),function(){"use strict";function t(t,e){function n(t){e.path("/"+t)}function o(){function e(t){return t.data}function n(t){return t}return t.get("/api/v1/auth/user").then(e)["catch"](n)}function r(e){function n(t){return t.data.posts}function o(t){return t}return t.get(a+"/get_category_posts?slug="+e).then(n)["catch"](o)}function c(e){function n(t){return t.data.post}function o(t){return t}return t.get(a+"/get_post?id="+e).then(n)["catch"](o)}function i(e){function n(t){return t.data.post}function o(t){return t}return t.get(a+"/get_post/?slug="+e).then(n)["catch"](o)}var a="/wordpress/api",u={goTo:n,getPostBySlug:i,getPostsByCategory:r,getPostById:c,isAuth:o};return u}angular.module("shared-services",[]).factory("sharedServices",t),t.$inject=["$http","$location"]}(),function(){"use strict";function t(t,e,n){function o(t){var e=sessionStorage.getItem("_jwt");return null!==e&&(t.headers.Authorization="Bearer "+sessionStorage.getItem("_jwt")),t}function r(t){return t}function c(e){return console.log(e),t.reject(e)}var i={request:o,response:r,responseError:c};return i}angular.module("api-interceptors",[]).service("apiService",t),t.$inject=["$q","$location"]}();