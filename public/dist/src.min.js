!function(){function t(t,e){e.interceptors.push("apiService")}function e(t,e,n,r){t.$on("$routeChangeStart",function(t,n,o){"/login"!==e.path()||null!==sessionStorage.getItem("_jwt")?r.isAuthenticated():e.path("/login")})}e.$inject=["$rootScope","$location","$window","loginService"],t.$inject=["$routeProvider","$httpProvider"],angular.module("intranet",["ngRoute","ngCookies","ngMessages","home","login","dashboard","mail","trans","shared-services","api-interceptors"]).run(e).config(t).constant("API_URL",{base_url:"/api/v2/"})}(),function(){"use strict";function t(t){t.when("/dashboard",{controller:"Dashboard",controllerAs:"vm",templateUrl:"public/app/modules/dashboard/tpl/dashboard.tpl.html",access:{restricted:!0}})}t.$inject=["$routeProvider"],angular.module("dashboard",[]).config(t)}(),function(){function t(t){t.when("/directory",{controller:"Directory",controllerAs:"vm",templateUrl:"public/app/modules/directory/directory.html"})}t.$inject=["$routeProvider"],angular.module("directory",[]).config(t)}(),function(){"use strict";function t(){return function(t){return new Date(t)}}function e(){return function(t){var e=t/1048576;return e.toFixed(2)}}function n(t){return function(e){return t.trustAsHtml(e)}}function r(){return function(t){var e=/&(nbsp|amp|quot|lt|gt);/g,n={nbsp:" ",amp:"&",quot:'"',lt:"<",gt:">"};return t.replace(e,function(t,e){return n[e]})}}n.$inject=["$sce"],angular.module("intranet").filter("sanitize",n).filter("removeEntities",r).filter("timestamp",t).filter("toMB",e)}(),function(){function t(t){t.when("/forms",{controller:"Form",controllerAs:"vm",templateUrl:"public/app/modules/forms/form-list.html",access:{restricted:!1}})}t.$inject=["$routeProvider"],angular.module("form",[]).config(t)}(),function(){function t(t){t.when("/help-desk",{templateUrl:"public/app/modules/help-desk/help.html",controller:"HelpDesk",controllerAs:"vm",access:{restricted:!1}})}t.$inject=["$routeProvider"],angular.module("help",[]).config(t)}(),function(){function t(t){t.when("/",{controller:"Home",controllerAs:"vm",templateUrl:"public/app/modules/home/home.html",access:{restricted:!1}}).when("/news-feed",{controller:"Home",controllerAs:"vm",templateUrl:"public/app/modules/home/news-feed.html",access:{restricted:!1}})}t.$inject=["$routeProvider"],angular.module("home",[]).config(t)}(),function(){function t(t){t.when("/login",{controller:"Login",controllerAs:"vm",templateUrl:"public/app/modules/login/tpl/login.tpl.html",access:{restricted:!1}})}t.$inject=["$routeProvider"],angular.module("login",[]).config(t)}(),function(){function t(t){t.when("/dashboard/mails",{templateUrl:"public/app/modules/mail/tpl/mail.tpl.html",controller:"Mail as vm",access:{restricted:!0}})}t.$inject=["$routeProvider"],angular.module("mail",[]).config(t)}(),function(){angular.module("poll",["ngCookies"])}(),function(){function t(t){t.when("/events",{controller:"Promotion",controllerAs:"vm",templateUrl:"public/app/modules/promotion/promotion.html"})}t.$inject=["$routeProvider"],angular.module("promotion",[]).config(t)}(),function(){"use strict";function t(t){t.when("/dashboard/truck-allo",{templateUrl:"public/app/modules/truck-allo/tpl/truck-allo.tpl.html",controller:"Trans as vm",access:{restricted:!0}}).when("/dashboard/truck-allo/transactions",{templateUrl:"public/app/modules/truck-allo/tpl/transactions.html",controller:"Trans as vm",access:{restricted:!0}}).when("/dashboard/truck-allo/transactions/create",{templateUrl:"public/app/modules/truck-allo/tpl/create.tpl.html",controller:"Trans as vm",access:{restricted:!0}}).when("/dashboard/truck-allo/transactions/:id/view",{templateUrl:"public/app/modules/truck-allo/tpl/transaction.html",controller:"Trans as vm",access:{restricted:!0}}).when("/dashboard/truck-allo/transactions/:id/edit",{templateUrl:"public/app/modules/truck-allo/tpl/transaction-edit.html",controller:"Trans as vm",access:{restricted:!0}}).otherwise({redirectTo:"/dashboard/truck-allo"})}t.$inject=["$routeProvider"],angular.module("trans",[]).config(t)}(),function(){"use strict";function t(t){function e(e){t.path(e)}var n=this;n.goTo=e}angular.module("dashboard").controller("Dashboard",t),t.$inject=["$location"]}(),function(){"use strict";function t(t,e,n){function r(){o(5)}function o(t){n.getEmployeesByDepartment(t).then(function(t){a.employees=t})["catch"](function(t){a.employees=[]})}function c(){a.query&&a.query.length>2?n.search(a.query).then(function(t){a.employees=t})["catch"](function(t){a.employees=o(5)}):a.employees=o(5)}var a=this;a.search=c,a.getEmployees=o,r(),n.getDepartments().then(function(t){a.departments=t})}angular.module("directory").controller("Directory",t),t.$inject=["$http","$routeParams","directoryService"]}(),function(){function t(t,e){function n(){e.getPostsByCategory("forms").then(function(t){r.forms=t})["catch"](function(t){r.forms=[]})}var r=this;n()}angular.module("form").controller("Form",t),t.$inject=["$routeParams","sharedServices"]}(),function(){function t(t,e,n){function r(){n.getTickets({fname:"Courtney",lname:"Laidlaw"}).then(function(t){s.tickets=t})["catch"](function(t){s.tickets=[]})}function o(t){t&&(s.issue.category=s.selected.id,s.issue={},s.message=!0,r())}function c(){s.message=!1}function a(t){switch(t){case"open-tickets":r(),s.open_tickets=!0,s.create_ticket=!1,s.closed_tickets=!1;break;case"create-ticket":i(),s.create_ticket=!0,s.open_tickets=!1,s.closed_tickets=!1;break;case"closed-tickets":s.open_tickets=!1,s.create_ticket=!1,s.closed_tickets=!0}}function i(){n.getCategories().then(function(t){s.selected=t[0],s.categories=t})["catch"](function(t){s.categories=[]})}function u(){n.getClosedTickets({fname:"Courtney",lname:"Laidlaw"}).then(function(t){s.tickets_closed=t})["catch"](function(t){s.tickets_closed=[]})}var s=this;s.open_tickets=!0,s.closed_tickets=!1,s.create_ticket=!1,s.message=!1,s.dismiss=c,s.toggle=a,s.handleForm=o,s.issue={},r(),u()}angular.module("help").controller("HelpDesk",t),t.$inject=["$scope","$http","helpDeskService"]}(),function(){"use strict";function t(t,e,n,r,o,c){function a(t){e.path("#/"+t)}function i(){c.goTo("blogs")}function u(){c.goTo("staff-focus")}function u(){o.getPostsByCategory("staff-focus").then(function(t){s.staff=t})["catch"](function(t){s.staff=[]})}var s=this;s.goTo=a,s.getBlogs=i,s.getStaffFocus=u}angular.module("home").controller("Home",t),t.$inject=["$http","$location","$window","$routeParams","homeService","sharedServices"]}(),function(){"use strict";function t(t,e){function n(){null!==sessionStorage.getItem("_jwt")&&e.isAuthenticated().then(function(e){e.success&&t.path("/dashboard")})}function r(n){e.authenticate(o.user).then(function(r){n&&(o.user={},n.$setValidity(),n.$setPristine(),n.$setUntouched()),e.setToken(r.token),t.path("/dashboard")})["catch"](function(t){console.log("Error")})}var o=this;o.message=!1,o.user={},o.handleForm=r,n()}angular.module("login").controller("Login",t),t.$inject=["$location","loginService"]}(),function(){function t(){console.log("mail")}angular.module("mail").controller("Mail",t),t.$inject=[]}(),function(){function t(t,e){function n(){var n={poll_id:1,answer:i.response,session_id:e.get("PHPSESSID")};t.post("/intranet/api/v1/poll/responses",n).then(function(t){i.showPollMessage=!0,i.response="ok",a()})["catch"](function(t){console.log("Erorr")})}function r(){i.showPollMessage=!1,i.showResults=!0,i.showPoll=!1,a()}function o(){i.showResults=!1,i.showPoll=!0,a()}function c(){i.showPollMessage=!1}function a(){t.get("/intranet/api/v1/poll/responses").then(function(t){i.results=t.data})["catch"](function(t){i.results={}})}var i=this;i.response="ok",i.processPoll=n,i.showResults=!1,i.showPoll=!0,i.viewResults=r,i.viewPoll=o,i.showPollMessage=!1,i.dismiss=c,a()}angular.module("poll").controller("Poll",t),t.$inject=["$http","$cookies"]}(),function(){function t(t){function e(){t.getPostsByCategory("promos").then(function(t){n.promo=t})["catch"](function(t){n.promo=[]})}var n=this;e()}angular.module("promotion").controller("Promotion",t),t.$inject=["sharedServices"]}(),function(){"use strict";function t(t,e,n){function r(){e.id?n.getTransaction(e.id).then(function(t){u.transaction=t})["catch"](function(){u.transaction={}}):n.getTransactions().then(function(t){u.transactions=t})["catch"](function(t){u.transactions=[]})["finally"](function(){u.loading=!1})}function o(e){t.path(e)}function c(e){t.path("/dashboard/truck-allo/transactions/"+e+"/view")}function a(){n.updateTransaction(u.transaction.particular,u.transaction.id).then(function(t){u.message.show=u.message.success=!0,u.message.text="Transaction updated successfully"})["catch"](function(){console.log("Error")})}function i(){n.createTransaction(u.trans).then(function(t){u.message.show=u.message.success=!0,u.message.text="Transaction created successfully"})["catch"](function(t){console.log("Error")})}var u=this;u.goTo=o,u.loading=!0,u.show=c,u.update=a,u.create=i,u.message={show:!1,message:""},u.councils=[],r()}angular.module("trans").controller("Trans",t),t.$inject=["$location","$routeParams","transService"]}(),function(){"use strict";function t(t){function e(){function e(t){return t.data}function n(t){return t}var r="/intranet/api/v1/departments";return t.get(r).then(e)["catch"](n)}function n(e){function n(t){return t.data}function r(t){return t}var o="/intranet/api/v1/departments/"+e+"/employees";return t.get(o).then(n)["catch"](r)}function r(e){function n(t){return t.data}function r(t){return t}var o="/intranet/api/v1/employees/search?q="+e;return t.get(o).then(n)["catch"](r)}var o={getDepartments:e,getEmployeesByDepartment:n,search:r};return o}angular.module("directory").factory("directoryService",t),t.$inject=["$http"]}(),function(){function t(t){function e(e){function n(t){return t.data}function r(t){return t}return t.post("/api/v1/tickets",e).then(n)["catch"](r)}function n(e){function n(t){return t.data}function r(t){return t}return t.get("/api/v1/tickets/"+e.fname+"/"+e.lname).then(n)["catch"](r)}function r(e){function n(t){return t.data}function r(t){return t}return t.get("/api/v1/tickets/"+e.fname+"/"+e.lname+"/closed").then(n)["catch"](r)}function o(){function e(t){return t.data}function n(t){return t}return t.get("/api/v1/admin/tickets/types").then(e)["catch"](n)}var c={createTicket:e,getTickets:n,getClosedTickets:r,getCategories:o};return c}angular.module("help").factory("helpDeskService",t),t.$inject=["$http"]}(),function(){function t(t){function e(){function e(t){return t.data.posts}function n(t){return t}return t.get(c+"/get_category_posts?slug=vacancies").then(e)["catch"](n)}function n(e){function n(t){return t.data.post}function r(t){return t}return t.get(c+"/get_post/?slug="+e).then(n)["catch"](r)}function r(e){function n(t){return t.data.posts}function r(t){return t}return t.get(c+"/get_category_posts?slug="+e).then(n)["catch"](r)}function o(){function e(t){return t.data.items}function n(t){return t}return t.get("http://rss2json.com/api.json?rss_url=http://jamaica-gleaner.com/feed/rss.xml").then(e)["catch"](n)}var c="/wordpress/api",a={getVacancies:e,getVacancyBySlug:n,getPostsByCategory:r,getRSSFeed:o};return a}angular.module("home").factory("homeService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function e(){var e="http://rss2json.com/api.json?rss_url=",n="http://www.jamaicaobserver.com/rss/news/",r=e+encodeURI(n);t.get(r).then(function(t){console.log(t.data.items.slice(0,3)),$scope.news=t.data.items.slice(0,3)})}var n={getRss:e};return n}t.$inject=["$http"],angular.module("intranet").factory("rssService",t),t.inject=["$http"]}(),function(){function t(t,e,n){function r(e){function r(t){return t.data}function o(t){return t}return t.post(n.base_url+"auth",e).then(r)["catch"](o)}function o(t){return(""!==t.username||""!==t.password)&&(""!==t.username&&""!==t.password)}function c(e){function r(t){return t.data}function o(t){return t}return t.post(n.base_url+"departments",{dn:e}).then(r)["catch"](o)}function a(){return t.get(API.URL+"auth/token").then(function(t){return t.data})["catch"](function(t){return t})}function i(t){localStorage.setItem("user",JSON.stringify(t))}function u(){return JSON.parse(localStorage.getItem("user"))}function s(){var t=JSON.parse(localStorage.getItem("user"));return t.id}function l(){var t=JSON.parse(localStorage.getItem("user"));return t.dept_id}function f(){localStorage.removeItem("user")}function d(){var t=JSON.parse(localStorage.getItem("user"));return t.uname}function u(e,r){function o(t){return t.data}function c(t){return t}return t.post(n.base_url+"users",{dn:e,dept_id:r}).then(o)["catch"](c)}function h(t){null==t&&void 0==t||sessionStorage.setItem("_jwt",t)}function p(){var t=sessionStorage.getItem("_jwt");if("undefined"==typeof t)return!1}var m={authenticate:r,checkCredentials:o,isAuthenticated:a,getDepartmentId:l,getDepartment:c,getUserId:s,getUser:u,getUserName:d,logout:f,setUser:i,setToken:h,getToken:p};return m}angular.module("login").service("loginService",t),t.$inject=["$http","$window","API_URL"]}(),function(){function t(t,e,n,r){function o(t,n){var o=e.base_url+"upload/"+n;return r.upload({url:o,file:t}).then(function(t){return t})}function c(r){function o(t){return t}function c(t){return t}""!==r.file_title&&null!=r.file_title||(r.file_title="none"),"other"===r.mail_type&&(r.mail_type=r.other_type),"cabinet_sub"===r.mail_type&&(r.mail_type="cabinet sub"),r.created_by=n.getUserId(),r.dept_id=n.getDepartmentId();var a=e.base_url+"mails";return t.post(a,r).then(o)["catch"](c)}function a(){return{mail_type:"letter",sender:"",receipent:"",from_org:"",subject:"",receipt_date:new Date,file_title:""}}function i(n){function r(t){return t.data}function o(t){return t}var c=e.base_url+"mails/"+n;return t.get(c).then(r)["catch"](o)}function u(n){function r(t){return t.data}function o(t){return t}var c=e.base_url+"mails/departments/"+n;return t.get(c).then(r)["catch"](o)}function s(n){function r(t){return t.data}function o(t){return t}var c=e.base_url+"mails/"+n.mail_id+"/actions";return t.post(c,n).then(r)["catch"](o)}function l(n){function r(t){return t.data}function o(t){return t}var c=e.base_url+"mails/"+n+"/actions";return t.get(c).then(r)["catch"](o)}function f(n){function r(t){return t.data}function o(t){return t}var c=e.base_url+"mails/"+n+"/attachments";return t.get(c).then(r)["catch"](o)}function d(r){function o(t){return t.data}function c(t){return t}var a=e.base_url+"mails/"+r.id;return r.created_by=n.getUserId(),r.uname=n.getUserName(),t.put(a,r).then(o)["catch"](c)}var h={getMailsByDepartmentId:u,getMail:i,createMail:c,initMail:a,getActions:l,getAttachments:f,createAction:s,uploadFile:o,updateMail:d};return h}angular.module("mail").service("mailService",t),t.$inject=["$http","API_URLS","loginService","Upload"]}(),function(){"use strict";function t(t,e){function n(t){e.path("/"+t)}function r(){function e(t){return t.data}function n(t){return t}return t.get("/api/v2/auth/user").then(e)["catch"](n)}function o(e){function n(t){return t.data.posts}function r(t){return t}return t.get(i+"/get_category_posts?slug="+e).then(n)["catch"](r)}function c(e){function n(t){return t.data.post}function r(t){return t}return t.get(i+"/get_post?id="+e).then(n)["catch"](r)}function a(e){function n(t){return t.data.post}function r(t){return t}return t.get(i+"/get_post/?slug="+e).then(n)["catch"](r)}var i="/wordpress/api",u={goTo:n,getPostBySlug:a,getPostsByCategory:o,getPostById:c,isAuth:r};return u}angular.module("shared-services",[]).factory("sharedServices",t),t.$inject=["$http","$location"]}(),function(){"use strict";function t(t,e){function n(){return t.get(e+"transactions").then(function(t){return t.data})["catch"](function(t){return t})}function r(n){return t.get(e+"transactions/"+n).then(function(t){return t.data})["catch"](function(t){return t})}function o(n,r){var o={value:n},c=e+"transactions/"+r;return t.put(c,o).then(function(t){return t.data})["catch"](function(t){return t})}function c(n){return t.post(e+"transactions",n).then(function(t){return t.data})["catch"](function(t){return t})}var a={getTransaction:r,getTransactions:n,updateTransaction:o,createTransaction:c};return a}angular.module("trans").service("transService",t),t.$inject=["$http","API_URL"]}(),function(){"use strict";function t(t,e,n){function r(t){var e=sessionStorage.getItem("_jwt");return null!==e&&(t.headers.Authorization="Bearer "+sessionStorage.getItem("_jwt")),t}function o(t){return t}function c(n){switch(n.status){case 403:e.path("/login");break;default:e.path("/login")}return t.reject(n)}var a={request:r,response:o,responseError:c};return a}angular.module("api-interceptors",[]).service("apiService",t),t.$inject=["$q","$location"]}();