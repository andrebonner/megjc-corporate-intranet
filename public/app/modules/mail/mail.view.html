<div ng-include="'public/app/partials/sub-menu.html'"></div>
<hr />
<div class="alert alert-warning"
     role="alert" data-ng-show="vm.mail_corr.follow_up == 2">
  <strong>Mail flagged for follow up on {{vm.mail_corr.follow_date | timestamp | date:'fullDate'}}</strong>
  <ul class="pull-right mail-follow-up">
    <!-- <li>
      <a href ng-click="vm.revealFollowupDate()">
        <i class="fa fa-pencil" aria-hidden="true"></i>
        Edit</a>
    </li> -->
    <li>
      <a href ng-click="vm.revealFollowupForm()">
        <i class="fa fa-times" aria-hidden="true"></i>
        Close</a>
    </li>
  </ul>
</div>
<div class="row" ng-show="vm.revealFollowup">
  <div class="col-md-12">
    <form novalidate ng-submit="vm.closeFollowup()">
      <div class="form-group">
        <label>Reason for closing follow up</label>
        <textarea class="form-control" ng-model="vm.followup_desc"></textarea>
      </div>
        <a class="btn btn-default" ng-click="vm.revealFollowupForm()">Cancel</a>
        <button class="btn btn-success" type="submit">Submit</button>
    <hr />
    </form>
  </div>
</div>

<div class="row" ng-show="vm.showFollowupDate">
  <div class="col-md-4">
    <div class="form-group">
      <label>Follow up date</label>
      <div class="input-group">
         <span class="input-group-addon" >
           <i class="fa fa-calendar" aria-hidden="true"></i>
       </span>
        <input class="form-control" type="date" ng-model="vm.follow_up_date">
      </div>
    </div>
    <button class="btn btn-default"
            style="margin-bottom:21px"
            ng-click="vm.revealFollowupDate()">Cancel
    </button>
    <button class="btn btn-success" style="margin-bottom:21px">Update</button>
  </div>
</div>


<div class="row help-desk">

  <div class="col-md-6">

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Subject</h3>
      </div>
      <div class="panel-body">
        {{vm.mail_corr.subject}}
      </div>
    </div>

    <div class="panel panel-default" ng-show="vm.fileTitle">
      <div class="panel-heading">
        <h3 class="panel-title">File Title</h3>
      </div>
      <div class="panel-body">
        {{vm.mail_corr.file_title}}
      </div>
    </div>

    <div class="panel panel-primary" ng-show="revealSubjectEditField">
      <div class="panel-heading">
        <h3 class="panel-title">Edit Subject</h3>
      </div>
      <div class="panel-body">
        <textarea class="form-control" ng-model="mail_corr.subject"></textarea>
        <hr />
        <button class="btn btn-success pull-right">Save</button>
        <button class="btn btn-default" ng-click="cancelSubjectEdit()">Cancel</button>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Received On</h3>
      </div>
      <div class="panel-body">
        {{vm.mail_corr.receipt_date | timestamp | date:'fullDate'}}
        <!-- <a href class="pull-right" ng-click="editReceivedOn()">Edit</a> -->
      </div>
    </div>

    <div class="panel panel-primary" ng-show="revealReceivedEditField">
      <div class="panel-heading">
        <h3 class="panel-title">Edit Received On</h3>
      </div>
      <div class="panel-body">
        <input class="form-control" type="date" ng-model="mail.receipt_date">
        <hr />
        <button class="btn btn-success pull-right">Save</button>
        <button class="btn btn-default" ng-click="cancelReceviedOnEdit()">Cancel</button>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Correspondence Date</h3>
      </div>
      <div class="panel-body">
        {{vm.mail_corr.mail_date | timestamp | date:'fullDate'}}
        <!-- <a href class="pull-right" ng-click="editCorrespondenceDate()">Edit</a> -->
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">From</h3>
      </div>
      <div class="panel-body">
        <strong>Organization </strong>- {{vm.mail_corr.from_org}}
        <br />
        <strong>Sender</strong> - {{vm.mail_corr.sender}}
        <!-- <a href class="pull-right">Edit</a> -->
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Receipent</h3>
      </div>
      <div class="panel-body">
        {{vm.mail_corr.receipent}}
        <!-- <a href class="pull-right">Edit</a> -->
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Entered on</h3>
      </div>
      <div class="panel-body">
        {{vm.mail_corr.created_on | timestamp | date:'fullDate'}}
      </div>
    </div>

  </div>
  <div class="col-md-6">
        <div class="panel panel-default">
    <div class="panel-heading">
    <h3 class="panel-title">Actions</h3>
  </div>
  <!-- <div class="panel-body">
    <input type="checkbox" ng-change="markForFollow()" ng-model="follow_up" /> Mark for follow up
  </div> -->
    <p ng-show="vm.actions.length < 1">There are no actions for this mail correspondence.</p>
    <table class="table table-hover" ng-show="vm.actions.length > 0">
        <tr ng-repeat="action in vm.actions">
          <td style="color:#2780E3"><i class="fa fa-exclamation-circle" aria-hidden="true"></i></td>
          <td style="width:150px;">{{action.created_on | timestamp | date: 'MMM d yyyy'}}</td>
          <td>{{action.description}}</td>
        </tr>
    </table>
    </div>

    <button class="btn btn-success" ng-click="vm.revealActionForm()">Add Action</button>

    <div style="padding-top:15px" ng-show="vm.revealAction">
      <form novalidate ng-submit="vm.createAction()">
        <div class="form-group">
          <label>Description</label>
          <textarea class="form-control" ng-model="vm.description"></textarea>
        </div>

        <a class="btn btn-default" ng-click="vm.cancel()">Cancel</a>
        <button class="btn btn-success" type="submit">Submit</button>
      </form>
    </div>
  </div>
</div>
